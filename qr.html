<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR & Barcode Scanner</title>
    <style>
        #scanner-container {
            text-align: center;
            margin-top: 50px;
        }
        #video-preview {
            width: 80%;
            max-width: 600px;
            margin: auto;
        }
    </style>
</head>
<body>
    <div id="scanner-container">
        <h1>QR & Barcode Scanner</h1>
        <button id="scan-button">Scan QR/Barcode</button>
        <video id="video-preview"></video>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/quagga/dist/quagga.min.js"></script>
    <script>
        const scanButton = document.getElementById('scan-button');
        const videoPreview = document.getElementById('video-preview');

        // Add click event listener to the scan button
        scanButton.addEventListener('click', function() {
            // Access the camera and start scanning
            startCamera();
        });

        function startCamera() {
            // Check if the browser supports getUserMedia
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
                    .then(function(stream) {
                        // Set the video stream as the source for the video element
                        videoPreview.srcObject = stream;
                        // Start the Quagga barcode scanner
                        Quagga.init({
                            inputStream: {
                                name: "Live",
                                type: "LiveStream",
                                target: videoPreview
                            },
                            decoder: {
                                readers: ["code_128_reader", "ean_reader", "ean_8_reader", "code_39_reader", "code_39_vin_reader", "codabar_reader", "upc_reader", "upc_e_reader", "i2of5_reader", "2of5_reader", "code_93_reader"],
                            }
                        }, function(err) {
                            if (err) {
                                console.error(err);
                                return;
                            }
                            Quagga.start();
                        });
                    })
                    .catch(function(error) {
                        console.error("Error accessing the camera: ", error);
                    });
            } else {
                alert("Sorry, your browser doesn't support camera access.");
            }
        }
    </script>
</body>
</html>
